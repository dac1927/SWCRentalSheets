<!DOCTYPE html>
<html>
<link rel="stylesheet" href="https://ssl.gstatic.com/docs/script/css/add-ons1.css">

<style>
* {
  box-sizing: border-box;
  overflow: hide;
}

body {
  background-color: #f1f1f1;
  margin: 0px;
  font-size:100%;
}

#regForm {
  background-color: #ffffff;
  padding: 2vmin;
  width:100vw;
  max-width:100%;
  height:100vh;
  max-height:100%;
}

h1 {
  text-align: center;  
}

input[type='text'],input[type='date'] {
  padding: 10px, 10px;
  font-size: 20px;
  border: 1px solid #aaaaaa;
  width: 75vw;
  overflow: auto;
}

/* Mark input boxes that gets an error on validation: */
input.invalid {
  background-color: px#ffdddd;
}

/* Hide all steps by default: */
.tab {
  display: none;
  padding: 10px;
  width:100%;
  height:80%;
}
h2 { 
    margin:0vmin;
}
button {
  border: none;
}

button:hover {
  opacity: 0.8;
}

#prevBtn {
  background-color: #bbbbbb;
}
table {
	padding: 0px;
}

/* Make circles that indicate the steps of the form: */
.step {
  height: 15px;
  width: 15px;
  margin: 0 2px;
  background-color: #bbbbbb;
  border: none;  
  border-radius: 50%;
  display: inline-block;
  opacity: 0.5;
}

.step.active {
  opacity: 1;
}

/* Mark the steps that are finished and valid: */
.step.finish {
  background-color: #4CAF50;
}
.step.unfinished {
  background-color: #ff3300;
}
.b-bottom {
	height: 20vh;
    position: relative;
}
#b-button {
	position: absolute;
    right: 5%;
    bottom: 5%;
}
#b-span {
	position:absolute;
    left: 1%;
    bottom: 0%;
}
select {
	width: 2vw;
    font-size:14px;
    padding: 6px 10px;
}
table {
	width: 80%;	
    height: 2.5rem;
}
th, td {
	padding: 7px;
    text-align: left;
}
</style>
<body>
<div style = "background-color: #ffffff;" >
<form id="regForm" onsubmit="">
  <!-- One "tab" for each step in the form: -->
  <div class="tab">
  	<h2>Name:</h2>
    <p><input type='text' placeholder="Last name..." oninput="this.className = ''" name="fname"></p>
    <h2>Start Date:</h2>
    <p><input type='date' oninput="this.className = ''" name="startDate"></p>
    <h2>End Date:</h2>
    <p><input type='date' oninput="this.className = ''" name="endDate"></p>
    <h2>Phone Number:</h2>
    <p><input type='text' placeholder="Phone number..." oninput="this.className = ''" name="phone"></p>
  </div>
  <div class="tab">
  	<h2>Bikes:</h2>
    <table>
    	<tr>
        	<th>
            Type:
            </th>
            <th>
            Size:
            </th>
            <th>
            Include?
            </th>
        </tr>
    	<tr class = 'selectTr'>
        	<td>
        		<select class = 'selectType' id=0 onChange='selectFcn(this)'>
          			<option>H</option>
          			<option>WH</option>
                    <option>HS</option>
                    <option>M</option>
          			<option>29</option>
          			<option>C</option>
          			<option>WC</option>
                    <option>RB</option>
          			<option>CX</option>
          			<option>K</option>
          			<option>TAG</option>
                    <option>T</option>
          			<option disabled selected value='-1' style='display: none'>Type</option>
        		</select>
           	</td>
            <td>
        		<select class = 'selectSize' onChange=''>
          			<option disabled selected value='-1' style='display: none'>Size</option>
        		</select>
           	</td>
            <td style='text-align:center'>
            <input type="checkbox" class = 'bikeCheck'>
            </td>
        </tr>
        <tr class = 'selectTr'>
        	<td>
        		<select class = 'selectType' id=1 onChange='selectFcn(this)'>
          			<option>H</option>
          			<option>WH</option>
                    <option>HS</option>
                    <option>M</option>
          			<option>29</option>
          			<option>C</option>
          			<option>WC</option>
                    <option>RB</option>
          			<option>CX</option>
          			<option>K</option>
          			<option>TAG</option>
                    <option>T</option>
          			<option disabled selected value='-1' style='display: none'>Type</option>
        		</select>
           	</td>
            <td>
        		<select class = 'selectSize' onChange=''>
          			<option disabled selected value='-1' style='display: none'>Size</option>
        		</select>
           	</td>
            <td style='text-align:center'>
            <input type="checkbox" class = 'bikeCheck'>
            </td>
        </tr>
        <tr class = 'selectTr'>
        	<td>
        		<select class = 'selectType' id=2 onChange='selectFcn(this)'>
          			<option>H</option>
          			<option>WH</option>
                    <option>HS</option>
                    <option>M</option>
          			<option>29</option>
          			<option>C</option>
          			<option>WC</option>
                    <option>RB</option>
          			<option>CX</option>
          			<option>K</option>
          			<option>TAG</option>
                    <option>T</option>
          			<option disabled selected value='-1' style='display: none'>Type</option>
        		</select>
           	</td>
            <td>
        		<select class = 'selectSize' onChange=''>
          			<option disabled selected value='-1' style='display: none'>Size</option>
        		</select>
           	</td>
            <td style='text-align:center'>
            <input type="checkbox" class = 'bikeCheck'>
            </td>
        </tr>
        <tr class = 'selectTr'>
        	<td>
        		<select class = 'selectType' id=3 onChange='selectFcn(this)'>
          			<option>H</option>
          			<option>WH</option>
                    <option>HS</option>
                    <option>M</option>
          			<option>29</option>
          			<option>C</option>
          			<option>WC</option>
                    <option>RB</option>
          			<option>CX</option>
          			<option>K</option>
          			<option>TAG</option>
                    <option>T</option>
          			<option disabled selected value='-1' style='display: none'>Type</option>
        		</select>
           	</td>
            <td>
        		<select class = 'selectSize' onChange=''>
          			<option disabled selected value='-1' style='display: none'>Size</option>
        		</select>
           	</td>
            <td style='text-align:center'>
            <input type="checkbox" class = 'bikeCheck'>
            </td>
        </tr>
        <tr class = 'selectTr'>
        	<td>
        		<select class = 'selectType' id=4 onChange='selectFcn(this)'>
          			<option>H</option>
          			<option>WH</option>
                    <option>HS</option>
                    <option>M</option>
          			<option>29</option>
          			<option>C</option>
          			<option>WC</option>
                    <option>RB</option>
          			<option>CX</option>
          			<option>K</option>
          			<option>TAG</option>
                    <option>T</option>
          			<option disabled selected value='-1' style='display: none'>Type</option>
        		</select>
           	</td>
            <td>
        		<select class = 'selectSize' onChange=''>
          			<option disabled selected value='-1' style='display: none'>Size</option>
        		</select>
           	</td>
            <td style='text-align:center'>
            <input type="checkbox" class = 'bikeCheck'>
            </td>
        </tr>
        <tr class = 'selectTr'>
        	<td>
        		<select class = 'selectType' id=5 onChange='selectFcn(this)'>
          			<option>H</option>
          			<option>WH</option>
                    <option>HS</option>
                    <option>M</option>
          			<option>29</option>
          			<option>C</option>
          			<option>WC</option>
                    <option>RB</option>
          			<option>CX</option>
          			<option>K</option>
          			<option>TAG</option>
                    <option>T</option>
          			<option disabled selected value='-1' style='display: none'>Type</option>
        		</select>
           	</td>
            <td>
        		<select class = 'selectSize' onChange=''>
          			<option disabled selected value='-1' style='display: none'>Size</option>
        		</select>
           	</td>
            <td style='text-align:center'>
            <input type="checkbox" class = 'bikeCheck'>
            </td>
        </tr>
        <tr class = 'selectTr'>
        	<td>
        		<select class = 'selectType' id=6 onChange='selectFcn(this)'>
          			<option>H</option>
          			<option>WH</option>
                    <option>HS</option>
                    <option>M</option>
          			<option>29</option>
          			<option>C</option>
          			<option>WC</option>
                    <option>RB</option>
          			<option>CX</option>
          			<option>K</option>
          			<option>TAG</option>
                    <option>T</option>
          			<option disabled selected value='-1' style='display: none'>Type</option>
        		</select>
           	</td>
            <td>
        		<select class = 'selectSize' onChange=''>
          			<option disabled selected value='-1' style='display: none'>Size</option>
        		</select>
           	</td>
            <td style='text-align:center'>
            <input type="checkbox" class = 'bikeCheck'>
            </td>
        </tr>
        <tr class = 'selectTr'>
        	<td>
        		<select class = 'selectType' id=7 onChange='selectFcn(this)'>
          			<option>H</option>
          			<option>WH</option>
                    <option>HS</option>
                    <option>M</option>
          			<option>29</option>
          			<option>C</option>
          			<option>WC</option>
                    <option>RB</option>
          			<option>CX</option>
          			<option>K</option>
          			<option>TAG</option>
                    <option>T</option>
          			<option disabled selected value='-1' style='display: none'>Type</option>
        		</select>
           	</td>
            <td>
        		<select class = 'selectSize' onChange=''>
          			<option disabled selected value='-1' style='display: none'>Size</option>
        		</select>
           	</td>
            <td style='text-align:center'>
            <input type="checkbox" class = 'bikeCheck'>
            </td>
        </tr>
        <tr class = 'selectTr'>
        	<td>
        		<select class = 'selectType' id=8 onChange='selectFcn(this)'>
          			<option>H</option>
          			<option>WH</option>
                    <option>HS</option>
                    <option>M</option>
          			<option>29</option>
          			<option>C</option>
          			<option>WC</option>
                    <option>RB</option>
          			<option>CX</option>
          			<option>K</option>
          			<option>TAG</option>
                    <option>T</option>
          			<option disabled selected value='-1' style='display: none'>Type</option>
        		</select>
           	</td>
            <td>
        		<select class = 'selectSize' onChange=''>
          			<option disabled selected value='-1' style='display: none'>Size</option>
        		</select>
           	</td>
            <td style='text-align:center'>
            <input type="checkbox" class = 'bikeCheck'>
            </td>
        </tr>
        <tr class = 'selectTr'>
        	<td>
        		<select class = 'selectType' id=9 onChange='selectFcn(this)'>
          			<option>H</option>
          			<option>WH</option>
                    <option>HS</option>
                    <option>M</option>
          			<option>29</option>
          			<option>C</option>
          			<option>WC</option>
                    <option>RB</option>
          			<option>CX</option>
          			<option>K</option>
          			<option>TAG</option>
                    <option>T</option>
          			<option disabled selected value='-1' style='display: none'>Type</option>
        		</select>
           	</td>
            <td>
        		<select class = 'selectSize' onChange=''>
          			<option disabled selected value='-1' style='display: none'>Size</option>
        		</select>
           	</td>
            <td style='text-align:center'>
            <input type="checkbox" class = 'bikeCheck'>
            </td>
        </tr>
    </table>
  </div>

  <div class= "b-bottom">
     <div class= "block" id = 'b-button' style="float:right;">
      <button class = "gray" type="button" id="prevBtn" onclick="nextPrev(-1)">Previous</button>
      <button class="blue" type="button" id="nextBtn" onclick="nextPrev(1)">Next</button>
     </div>
         <!-- Circles which indicates the steps of the form: -->
  	 <div id = 'b-span' style="text-align:left;margin-top: 5%;margin-left: 3%; margin-bottom:3%;">
    	<span class="step"></span>
    	<span class="step"></span>
     </div>
    </div>
</form>
</div>
</body>
<script>

var currentTab = 0; // Current tab is set to be the first tab (0)
showTab(currentTab); // Display the crurrent tab
var hList = ['15', '17', '19', '21','22.5','24'];
var whList = ['15', '17', '19', '20.5'];
var hsList = ['17','19','20.5'];
var mList = ['13','15','17','19','20.5','22','24'];
var b29er = ['S','M','L'];
var cList = ['16', '17', '18', '20', '21'];
var wcList = ['14','15', '16', '17', '18'];
var rbList = ['50', '52', '54', '56', '58'];
var cxList = ['48', '52', '54', '56', '58'];
var kList = ['16(NG)', '20', '24'];
var talong = [''];
var trailor = ['S','D'];
var allList = [hList, whList, hList, mList, b29er, cList, wcList,rbList,cxList, kList,talong,trailor];
function submitForm() {
  var type = document.getElementsByClassName('selectType');
  var size = document.getElementsByClassName('selectSize');
  var check = document.getElementsByClassName('bikeCheck');
  var name = document.getElementsByName('fname')[0];
  var sDate = document.getElementsByName('startDate')[0];
  var eDate = document.getElementsByName('endDate')[0];
  var bikes = [];
  for(var i = 0; i < check.length; i++) {
    if(check[i].checked) {
      bikes.push(type[i].options[type[i].selectedIndex].value + size[i].options[size[i].selectedIndex].value );
    }
  }
  google.script.run.withSuccessHandler(resetForm)
  .withFailureHandler(function(msg,element){})
  .finishRez(name.value, sDate.value, eDate.value, bikes);
}
function resetForm(e) {
  if(e) {
    document.getElementById('regForm').reset();
    nextPrev(-1);
    var s = document.getElementsByClassName("step");
    s[0].className = "step";
    s[1].className = "step";
  }
}
function selectFcn(e) {
	//window.alert(e.selectedIndex)
	if (e.selectedIndex < 12) {
		var oList = allList[e.selectedIndex];
    	var sSelect = document.getElementsByClassName('selectSize')[e.id];
        var check = document.getElementsByClassName('bikeCheck')[e.id];
    	var s = '';
    	for(var i = 0; i < oList.length; i++) {
    		s += '<option>' + oList[i] + '</option>';
    	}
        s+=  "<option value='-1' style='display: none'>None</option>";
    	s += "<option disabled selected value='-1' style='display: none'>Size</option>";
        sSelect.innerHTML = s;
        check.checked = true;
    }
}
function showTab(n) {
  // This function will display the specified tab of the form...
  var x = document.getElementsByClassName("tab");
  x[n].style.display = "block";
  //... and fix the Previous/Next buttons:
  if (n == 0) {
    document.getElementById("prevBtn").style.display = "none";
  } else {
    document.getElementById("prevBtn").style.display = "inline";
  }
  if (n == (x.length - 1)) {
    document.getElementById("nextBtn").innerHTML = "Submit";
  } else {
    document.getElementById("nextBtn").innerHTML = "Next";
  }
  //... and run a function that will display the correct step indicator:
  fixStepIndicator(n)
}

function nextPrev(n) {
  validateForm();
  // This function will figure out which tab to display
  var x = document.getElementsByClassName("tab");
  //validateForm();
  // Hide the current tab:
  x[currentTab].style.display = "none";
  // Increase or decrease the current tab by 1:
  // if you have reached the end of the form...
  if (currentTab + n >= x.length) {
    // ... the form gets submitted:
    if(validateForm()) {
      submitForm();
    } else {
      showTab(currentTab);
    }
    return false;
  } else {
    currentTab = currentTab + n;
    showTab(currentTab);
  }
  // Otherwise, display the correct tab:
  return true;
}

function validateForm() {
  // This function deals with validation of the form fields
  var x, y, z, i, valid = true;
  x = document.getElementsByClassName("tab");
  y = x[currentTab].getElementsByTagName("input");
  z = x[currentTab].getElementsByClassName("selectSize");
  if(currentTab === 0) {
  	// A loop that checks every input field in the current tab:
  	for (i = 0; i < y.length; i++) {
  	  // If a field is empty...
  	  if (y[i].value === "") {
  	    // add an "invalid" class to the field:
   	   y[i].className += " invalid";
  	    // and set the current valid status to false
   	   valid = false;
       }
  	}
  }
	 else if(currentTab === 1) {
	 var c = x[currentTab].getElementsByClassName('bikeCheck');
	 var bikeCount = 0;
 	 for (i = 0; i < z.length && i < c.length; i++) {
    	// If a field is empty...
   	 	if(c[i].checked) {
    		if (z[i].value === "-1") {
      		// add an "invalid" class to the field:
    	  	z[i].className += " invalid";
	      	// and set the current valid status to false
	      	valid = false;
    		} else {
     	   		bikeCount++;
        	}
    	 }
  	}
  	if(bikeCount === 0)
  		valid = false;
  }
  // If the valid status is true, mark the step as finished and valid:
  var s = document.getElementsByClassName("step")[currentTab];
  if (valid) {
    s.className = s.className.replace("unfinished", "");
    s.className += " finish";
  }
  else {
  	s.className = s.className.replace("finished", "");
    s.className += " unfinished";
  }
  return valid; // return the valid status
}

function fixStepIndicator(n) {
  // This function removes the "active" class of all steps...
  var i, x = document.getElementsByClassName("step");
  for (i = 0; i < x.length; i++) {
    x[i].className = x[i].className.replace(" active", "");
  }
  //... and adds the "active" class on the current step:
  x[n].className += " active";
}
</script>
</html>
